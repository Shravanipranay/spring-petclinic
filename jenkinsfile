node('jfrog_1'){
    stage('vcs'){
        git branch: 'declarative', url: 'https://github.com/Shravanipranay/spring-petclinic.git'
    }
    stage('build'){
        sh '/opt/maven/bin/mvn package'
    }
    stage('archiving artifacts'){
        archiveArtifacts artifacts : '**/spring-petclinic-3.0.0-SNAPSHOT.jar'
                         junit '**/*.xml'
    }
    stage('craeting folder'){
        sh "mkdir -p /tmp/${JOB_NAME}/${BUILD_ID}"
        sh "cp -r **/spring-petclinic-*.jar /tmp/${JOB_NAME}/${BUILD_ID}"
        sh "aws s3 sync /tmp/${JOB_NAME}/${BUILD_ID} s3://jenkins789"
    }
}
